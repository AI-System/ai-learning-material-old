Python 中的脚本编写
---

### 概述

- Python 安装和环境设置

- 运行和修改 Python 脚本

- 与用户输入交互

- 处理异常

- 读写文件

- 导入本地、标准和第三方模块

- 在解释器中进行实验

---

### 在脚本中接受原始输入

- 使用内置函数 `input` 获取用户的原始输入, 该函数接受一个可选字符串参数，用于指定在要求用户输入时向用户显示的消息。

  ```Python
    name = input("Enter your name: ")
    print("Hello there, {}!".format(name.title()))
  ```

  * 这段代码提示用户输入姓名，然后在问候语中使用该输入。input 函数获取用户输入的任何内容并将其存储为字符串。

- 将输入解析为字符串之外的其他类型，例如整数（如以下示例所示），需要用新的类型封装结果并从字符串转换为该类型。
  ```Python
    num = int(input("Enter an integer"))
    print("hello" * num)
  ```

- 我们还可以使用内置函数 eval 将用户输入解析为 Python 表达式。该函数会将字符串评估为一行 Python 代码。
  ```python
    result = eval(input("Enter an expression: "))
    print(result)
  ```
  * 如果用户输入 `2 * 3`，输出为 `6`。

### 错误和异常

- 当 Python 无法解析代码时，就会发生`语法错误`，因为我们没有遵守正确的 Python 语法。
- 当在程序执行期间出现意外情况时，就会发生`异常`，即使代码在语法上正确无误。Python 有不同类型的内置异常。

### 指定异常

- 可以指定要在 `except` 块中处理哪个错误，如下所示：
  ```python
    try:
      # some code
    except ValueError:
      # some code
  ```

- 现在它会捕获 `ValueError` 异常，但是不会捕获其他异常。如果我们希望该处理程序处理多种异常，我们可以在 `except` 后面添加异常元组。
  ```python
    try:
        # some code
    except (ValueError, KeyboardInterrupt):
        # some code
  ```

- 或者，如果我们希望根据异常执行不同的代码块，可以添加多个 `except` 块。
  ```python
    try:
        # some code
    except ValueError:
        # some code
    except KeyboardInterrupt:
        # some code
  ```

- 处理除以零的案例：

  ```python
    def create_groups(items, num_groups):
        try:
            size = len(items) // num_groups
        except ZeroDivisionError:
            print("WARNING: Returning empty list. Please use a nonzero number.")
            return []
        else:
            groups = []
            for i in range(0, len(items), size):
                groups.append(items[i:i + size])
            return groups
        finally:
            print("{} groups returned.".format(num_groups))

    print("Creating 6 groups...")
    for group in create_groups(range(32), 6):
        print(list(group))

    print("\nCreating 0 groups...")
    for group in create_groups(range(32), 0):
        print(list(group))
  ```

  正确的输出应该是：

  ```log
    Creating 6 groups...
    6 groups returned.
    [0, 1, 2, 3, 4]
    [5, 6, 7, 8, 9]
    [10, 11, 12, 13, 14]
    [15, 16, 17, 18, 19]
    [20, 21, 22, 23, 24]
    [25, 26, 27, 28, 29]
    [30, 31]

    Creating 0 groups...
    WARNING: Returning empty list. Please use a nonzero number.
    0 groups returned.
  ```

### 访问错误消息

- 在处理异常时，依然可以如下所示地访问其错误消息：
  ```python
    try:
        # some code
    except ZeroDivisionError as e:
      # some code
      print("ZeroDivisionError occurred: {}".format(e))
  ```

  应该会输出如下所示的结果：

  ```log
    ZeroDivisionError occurred: division by zero
  ```

- 如果没有要处理的具体错误，依然可以如下所示地访问消息：

  ```python
    try:
        # some code
    except Exception as e:
      # some code
      print("Exception occurred: {}".format(e))
  ```

  此处：`Exception` 是所有内置异常的基础类。


  ### 学习链接

  - https://docs.python.org/3/library/exceptions.html#bltin-exceptions